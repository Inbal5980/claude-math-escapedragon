<script>
  function showMessage(kind, html) {
    const el = document.getElementById('message');
    el.className = 'message ' + kind;
    el.innerHTML = html;
    el.style.display = 'block'; // מבטיח שזה יוצג
  }

  function checkAnswer() {
    const whole = document.getElementById('whole').value.trim();
    const start = document.getElementById('start').value.trim();
    const end   = document.getElementById('end').value.trim();

    const fullAnswer  = whole + '+' + start + '=' + end;
    const cleanAnswer = fullAnswer.replace(/\s/g, '');

    if (cleanAnswer === '2+6=8' || cleanAnswer === '6+2=8') {
      showMessage('success','🎉 כל הכבוד! 🎉<br>כעת לחצו על חץ החזרה וכתבו את הפתרון במקום המתאים כדי לעבור לחדר הבא!');
      return;
    }

    if (!whole || !start || !end) {
      showMessage('error','🤔 אנא מלאו את כל השדות!');
      return;
    }

    const wholeNum = parseInt(whole,10);
    const startNum = parseInt(start,10);
    const endNum   = parseInt(end,10);

    if (isNaN(wholeNum) || isNaN(startNum) || isNaN(endNum)) {
      showMessage('error','🤔 אנא הכניסו מספרים בלבד!');
      return;
    }

    if (wholeNum + startNum === endNum) {
      showMessage('warning','✨ התרגיל המתמטי שכתבתם נכון אבל הוא אינו מתאים לפתרון השאלה בחדר. נסו שוב! 💭');
    } else {
      showMessage('error','😊 אוי, יש טעות קטנה בחישוב. קחו רגע לחשוב שוב - אתם יכולים! 💪');
    }
  }

  // מחברים את הכפתור לקוד בלי onclick אינליין
  document.addEventListener('DOMContentLoaded', function () {
    var btn = document.getElementById('checkBtn');
    if (btn) btn.addEventListener('click', checkAnswer);
  });
</script>
